# args = 5
['surf2ma', '8', 'd:\\Yajie\\code\\voxel\\data\\elephant\\elephant.ply', '0.02']
level, scale = (3, 0.99)
using volume file: d:\Yajie\code\voxel\data\elephant\elephant_8.sog
[]


--------------------------------------------------
-----------PolyMender creates .sof/.sog-----------
--------------------------------------------------
mesh: d:\Yajie\code\voxel\data\elephant\elephant.ply
 PolyMender-dc "d:\Yajie\code\voxel\data\elephant\elephant.ply" 3 0.99 "d:\Yajie\code\voxel\data\elephant\elephant_8.sog" 

PLY file format.
Vertices: 2496 Polygons: 5000
Origin: (-0.505007 -0.505554 -0.505042), Dimension: 1.010579
Manifold table built.

Scan converting to depth 3...
/ 1000 triangles:  20.000000% complete.| 2000 triangles:  40.000000% complete.\ 3000 triangles:  60.000000% complete.- 4000 triangles:  80.000000% complete./ 5000 triangles:  100.000000% complete.Time taken: 0.039000 seconds                   
Patching...
Time taken: 0.000000 seconds 
Building signs...
Time taken: 0.000000 seconds 

Writing signed octree with geometry.
Grid dimension: 8


----------------------------------------------
-----------volume to voxel boundary-----------
----------------------------------------------
" voroUtil -md=vol2mesh -onlyBndryVts "d:\Yajie\code\voxel\data\elephant\elephant_8.sog" "d:\Yajie\code\voxel\data\elephant\elephant_8" "
Start reading .SOF file d:\Yajie\code\voxel\data\elephant\elephant_8.sog
------- creating octree -------- 
octree res = 8
bbox len in mesh space: 1.01058
scale factor: 0.126322
lower left: (-0.505007, -0.505554, -0.505042)
Warning: mesh_to_vox and auto_vox_to_mesh are not the same!
mesh-to-vox: 7.91626 0 0 3.99776
0 7.91626 0 4.00209
0 0 7.91626 3.99804
0 0 0 1

auto-mesh-to-vox: 7.91626 0 0 3.99776
0 7.91626 0 4.00209
0 0 7.91626 3.99804
0 0 0 1

octree constructed. Leaf/empty/internal: 107/160/38

Done: volume file reading.
average = 3.738046 max = 6
23 is the longest
cycle table set.
# leaf centers collected: 87
writing boundary vts to "d:\Yajie\code\voxel\data\elephant\elephant_8.node"...
time(I/O) -> extract boundary pts: 0 ms
time(I/O) -> write boundary pts: 5 ms


----------------------------
-----------tetgen-----------
----------------------------
Opening d:\Yajie\code\voxel\data\elephant\elephant_8.node.
Delaunizing vertices...
Delaunay seconds:  0.001

NOT writing a .node file.
NOT writing an .ele file.
NOT writing an .face file.
NOT writing an .edge file.
Writing d:\Yajie\code\voxel\data\elephant\elephant_8.1.v.node.
Writing d:\Yajie\code\voxel\data\elephant\elephant_8.1.v.edge.
Writing d:\Yajie\code\voxel\data\elephant\elephant_8.1.v.face.
Writing d:\Yajie\code\voxel\data\elephant\elephant_8.1.v.cell.

Output seconds:  0.054
Total running seconds:  0.055

Statistics:

  Input points: 87

  Mesh points: 87
  Mesh tetrahedra: 322
  Mesh faces: 693
  Mesh edges: 457
  Convex hull faces: 98

time -> tetgen total: 67.7321786185 ms


------------------------------
-----------renaming-----------
------------------------------


------------------------------------------------
-----------tetgen voro to mesh format-----------
------------------------------------------------
voroUtil -md=voro2mesh -needEuler -siteFile="d:\Yajie\code\voxel\data\elephant\elephant_8.node" "d:\Yajie\code\voxel\data\elephant\elephant_8.sog" "d:\Yajie\code\voxel\data\elephant\elephant_8" "d:\Yajie\code\voxel\data\elephant\elephant_8_ma.ply" -tt=0.02
Reading a volume file: d:\Yajie\code\voxel\data\elephant\elephant_8.sog
Start reading .SOF file d:\Yajie\code\voxel\data\elephant\elephant_8.sog
------- creating octree -------- 
octree res = 8
bbox len in mesh space: 1.01058
scale factor: 0.126322
lower left: (-0.505007, -0.505554, -0.505042)
Warning: mesh_to_vox and auto_vox_to_mesh are not the same!
mesh-to-vox: 7.91626 0 0 3.99776
0 7.91626 0 4.00209
0 0 7.91626 3.99804
0 0 0 1

auto-mesh-to-vox: 7.91626 0 0 3.99776
0 7.91626 0 4.00209
0 0 7.91626 3.99804
0 0 0 1

octree constructed. Leaf/empty/internal: 107/160/38

Done: volume file reading.
Reading voroinfo ...
Reading voro info from tetgen files... 
Reading sites positions from file... 
time(I/O) -> read pts from .node:2 ms
Done: 87 sites positions read. 
.v.node file processed.
.v.edge file processed.
.v.face file processed.
done: 87 site positions inserted to kdtree.
radii estimated.
.v.cell file processed.
time(I/O) -> read tetgen files:68 ms
time -> infer sites from cell:29 ms
time -> finalize CC:27 ms
Done: voro info read.
Done: voro info read.
Writing inside voro to mesh file ...
Starting preprocessing voro...

------ Euler Characteristic (of pruned voro diagram) -------
euler = V - E + F = 2
V / E / F / T / C = 157 / 224 / 69 / 0 / 3
------ (Euler) -------
before merging voro size: 420/840/457
sq. radius = 1.97531e-13
done: merging close vertices.
done: saving remaining vertices (after merging) into geometry struct.
done: updating validity tag for vertices.
done: updating radius function for vertices.
done: checking and handling edges degeneracy after merging.
done: checking and handling faces degeneracy after merging.
done: saving edges into geometry struct.
time -> finalize CC:2 ms
done: replacing old with new geometry struct.
done: updating sites for voro-faces.
time -> merging operation: 17 ms
after merging voro size: 28/44/18
time -> VD in/out tagging: 28 ms
time -> IVD-merge: 26 ms

------ Euler Characteristic (of after merging vts within 0.000000) -------
euler = V - E + F = 2
V / E / F / T / C = 28 / 44 / 18 / 0 / 1
------ (Euler) -------
Done preprocessing voro.
inside indices ready.
measures computed.
inside geometry obtained.
inside geometry compact-ified.
time -> extract inside: 1 ms
time -> compute measure: 0 ms
inside part extracted. 
writing to ply file... 
# vts/edges/faces: 28/50/24
range of measure: [1,1.41421]
time -> finalize CC:3 ms
skeleton: removed-tags init.ed.
f_t, e_t: 0.08, 0.08
init.ing q ...
after init, q size: 3
prune: iterative removal done. 
# remaining vts after thinning ( >= # connected components): 24

------ Euler Characteristic (of voro diagram after thinning) -------
euler = V - E + F = 2
V / E / F / T / C = 24 / 46 / 24 / 0 / 3
------ (Euler) -------
writing remaining cc to file: d:\Yajie\code\voxel\data\elephant\elephant_8_ma_thinned0.020000.ply
writing to ply file... 
# vts/edges/faces: 24/3/24
time -> thinning: 7 ms
time -> write IVD (I/O): 6 ms
time -> write thinned IVD (I/O): 4 ms
Done: inside voro info written.
writing radii to file d:\Yajie\code\voxel\data\elephant\elephant_8_ma.r
Done: 56 radii written to file d:\Yajie\code\voxel\data\elephant\elephant_8_ma.r
time(I/O) -> write radii: 4 ms
Done: writing radii to file. 
running scirpt on d:\Yajie\code\voxel\data\elephant\elephant.ply at res 8
